version: "3.1"

rules:

- rule: Say goodbye anytime the user says goodbye
  steps:
    - intent: goodbye
    - action: utter_goodbye

- rule: Say 'I am a bot' anytime the user challenges
  steps:
    - intent: bot_challenge
    - action: utter_iamabot

- rule: Greet the user
  steps:
    - intent: greet
    - action: utter_greet

- rule: Handle weather queries
  steps:
    - intent: ask_weather
    - action: action_weather

- rule: Provide living cost information
  steps:
    - intent: ask_living_cost
    - action: action_living_cost

- rule: Provide document checklist information
  steps:
    - intent: ask_doc_checklist
    - action: action_doc_checklist

- rule: Provide visa information
  steps:
    - intent: ask_visa_info
    - action: action_visa_info

- rule: Provide scholarship information
  steps:
    - intent: ask_scholarship
    - action: action_scholarship_info

- rule: Provide university ranking information
  steps:
    - intent: ask_university_ranking
    - action: action_university_ranking

- rule: Provide application deadline information
  steps:
    - intent: ask_application_deadline
    - action: action_application_deadline

- rule: Help compare universities
  steps:
    - intent: compare_universities
    - action: action_compare_universities

- rule: Handle field-specific requests
  steps:
    - intent: ask_field_specific
    - action: action_field_specific

- rule: Handle out of scope questions
  steps:
    - intent: out_of_scope
    - action: utter_out_of_scope

- rule: Handle fallback with ChatGPT (only when no form active)
  condition:
    - active_loop: null
  steps:
    - intent: nlu_fallback
    - action: action_chatgpt_fallback

- rule: Show universities with relaxed criteria
  steps:
    - intent: request_relaxed_criteria
    - action: action_recommend_universities_relaxed

- rule: Activate student profile form
  steps:
    - intent: inform_profile
    - action: student_profile_form
    - active_loop: student_profile_form

- rule: Submit student profile form
  condition:
    - active_loop: student_profile_form
  steps:
    - action: student_profile_form
    - active_loop: null
    - action: utter_submit
    - action: action_recommend_universities

- rule: Handle budget-based university queries
  steps:
    - intent: ask_universities_by_budget
    - action: action_universities_by_budget

- rule: Show IELTS waiver friendly universities
  steps:
    - intent: ask_ielts_waiver
    - action: action_ielts_waiver_universities

- rule: Show best affordable universities
  steps:
    - intent: ask_affordable_universities
    - action: action_affordable_universities

- rule: Safety - self-harm support
  steps:
    - intent: self_harm
    - action: action_safety_self_harm

- rule: Safety - illegal or dangerous
  steps:
    - intent: illegal_or_dangerous
    - action: action_safety_illegal_danger

- rule: Generic apply phrases start the profile form
  steps:
    - intent: inform_profile
    - action: student_profile_form
    - active_loop: student_profile_form

- rule: Continue student profile form while active
  condition:
    - active_loop: student_profile_form
  steps:
    - action: student_profile_form